# Mockito教程

powermock可以mock静态方法，或者是final方法，class，以及局部变量。

直接用 mockito和powermock是一种很棒的组合。

## 一些单元测试的好习惯

1. 单元测试应该要自动执行
2. 单元测试的执行速度要够快（要不一次单元测试 要半天，可怕）
3. 单元测试不应该依赖于其他的单元测试，并且单元测试的执行顺序是任意的。
4. 测试不应依赖于数据库访问、文件访问，第三方接口等等或任何长时间运行的任务。相反，单元测试应该隔离外部依赖
5. 单元测试在任何时候，任何环境执行，结果都是一样的。
6. 单元测试应该有意义，纯粹的为了代码覆盖率，行数覆盖率去凑，是没有意义的。（例如为 getter  setter  toString这些方法做覆盖）
7. 单元测试代码要尽可能短而清楚，同时单元测试代码不能被当做次等公民要和你的源码放到同一高度。其实不仅仅是单元测试，我们的配置文件也要放到和源码同一高度（比如要有版本管理）

单元测试要遵循的一些原则

- 单元测试必须是可靠的，应该是可靠的：如果并且只有当产品代码被破坏时，单元测试才会失败。
- 单元测试应该是自动的，并且可以在任何时候被验证，同时他可以节约大量回归测试的时间（就是手动测试，因为如果在一个老项目里增加一个新功能，按理说要把所有功能都回归测试一遍），如果我们有这个单元测试，那么在做回归测试之前，我们心里就有谱了。
- 单元测试应该被快速的执行，并迅速的反馈。
- 无障碍的启动和运行。

mockito的一个重要作用就是帮助我们的单元测试隔离外部环境依赖。减少不必要的麻烦和损失（例如污染了数据库，或者单元测试还要准备一套全的单元测试的环境）。

例如：

- 获取数据库的连接或者获取/更新数据
- 连接互联网下载文件
- 连接邮件服务器发送邮件
- 调用一个外部的web服务
- 执行IO操作：例如打印一个报表

mockito不能用于局部变量，只能用于全局变量的注入操作。

